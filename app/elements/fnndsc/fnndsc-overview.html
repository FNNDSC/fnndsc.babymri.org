<link rel='import' href='../../bower_components/polymer/polymer.html'>
<link rel="import" href="../../bower_components/iron-flex-layout/classes/iron-flex-layout.html">

<link rel='import' href='../../bower_components/parallax-element/parallax-layers.html'>
<link rel="import" href="../../bower_components/parallax-element/parallax-scroller-behavior.html">

<link rel="import" href="../fnndsc/fnndsc-overview-styles.html">

<dom-module id="fnndsc-overview">
  <template>
    <style include="fnndsc-overview-styles"></style>
    <style>
      :host {
        font: 200% / 1.5 Arial;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        margin: 0;
        padding: 0;
        -webkit-overflow-scrolling: auto;
        -webkit-flex-direction: column;
        flex-direction: column;
        overflow-y: auto;
        overflow-x: hidden;
      }

      parallax-layers {
        min-height: 300px;
        z-index: -1;
      }

      parallax-layers > .parallax-layer {
        background: url("https://googledrive.com/host/0B8u7h0aKnydhMENyWHZNbVJTTkE/fetal_by_jfkpaint.jpg");
        background-position: 50% 50%;
        background-repeat: no-repeat;
        background-size: cover;
        color: white;
      }
    
      div.no-parallax {
        min-height: 300px;
        z-index: 0;
        background: red;
        border-style: solid;
        border-width: 5px;
        border-color: black;
      }

      parallax-container {
        font-size: 200%;
      }

      .title {
        text-align: center;
        position: absolute;
        left: 50%;
        top: 50%;
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
      }


    </style>

    <parallax-layers style="z-index:-1">
            <div depth="-0.3" class="parallax-layer fullbleed layout vertical center-center">
              Welcome to the Fetal Neonatal Neuroimaging and Developmental Science Center (FNNDSC)
            </div>
          </parallax-layers>


    <template is="dom-repeat" items="{{sections}}">

        <template is="dom-if" if="{{isNormalSection(item)}}">
          <div class="no-parallax     layout vertical center-center">
            [[item.label]]
          </div>
        </template>

       <template is="dom-if" if="{{!isNormalSection(item)}}">
          <parallax-layers style$="{{computeSectionZindex(item)}}">
            <div depth$="[[item.depth]]" class="parallax-layer fullbleed layout vertical center-center">
              [[item.label]]
            </div>
          </parallax-layers>
        </template>

      </template>

      <div style="height:50vh">
           footer....
          </div>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'fnndsc-overview',
        behaviors: [Polymer.ParallaxScrollerBehavior],
        properties: {
        sections: {
          type: Array,
          value: function() {
            return [{label:'Welcome to the Fetal Neonatal Neuroimaging and Developmental Science Center (FNNDSC)', depth:0},
              {label:'wow parallax', depth:-0.3},
              {label:'much normal div', depth:0},
              {label:'yum foreground', depth:0.2},
              {label:'so normal div', depth:0},
              {label:'very parallax', depth:-1},
              {label:'many normal div', depth:0}];
          }
        }
      },
      isNormalSection: function(section) {
        return section.depth === 0;
      },
      computeSectionZindex: function(section) {
        return 'z-index:' + (section.depth <= 0 ? -1 : 1) + ';';
      }
      });
    })();
  </script>
</dom-module>
